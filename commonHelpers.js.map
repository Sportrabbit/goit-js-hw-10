{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict'\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputElem = document.querySelector('#datetime-picker');\nconst buttonElem = document.querySelector('[data-start]');\nconst daysElem = document.querySelector('[data-days]');\nconst hoursElem = document.querySelector('[data-hours]');\nconst minutesElem = document.querySelector('[data-minutes]');\nconst secondsElem = document.querySelector('[data-seconds]');\n\nlet timer = {\n    intervalid: null,\n    isActive: false,\n    differenceInTime: 0,\n    userSelectedDate: null,\n\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n        return { days, hours, minutes, seconds };\n    },\n\n    start() {\n        if (!this.userSelectedDate || this.isActive) {\n            return;\n        }\n        const startTime = this.userSelectedDate;\n        const currentTime = Date.now();\n        this.differenceInTime = startTime - currentTime;\n\n        if (this.differenceInTime <= 0) {\n            this.differenceInTime = 0;\n            this.stop();\n            return;\n        }\n\n        this.isActive = true;\n        this.intervalid = setInterval(() => {\n            const currentTime = Date.now();\n            this.differenceInTime = startTime - currentTime;\n            if (this.differenceInTime <= 0) {\n                this.stop();\n            } else {\n                const timeInTimer = this.convertMs(this.differenceInTime);\n                daysElem.textContent = this.padTime(timeInTimer.days);\n                hoursElem.textContent = this.padTime(timeInTimer.hours);\n                minutesElem.textContent = this.padTime(timeInTimer.minutes);\n                secondsElem.textContent = this.padTime(timeInTimer.seconds);\n            }\n        }, 1000);\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.isActive = false;\n    },\n\n    reset() {\n        clearInterval(this.intervalid);\n        this.isActive = false;\n        daysElem.textContent = '00';\n        hoursElem.textContent = '00';\n        minutesElem.textContent = '00';\n        secondsElem.textContent = '00';\n    },\n\n    padTime(value) {\n        return String(value).padStart(2, '0');\n    },\n};\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onclose: selectedDates => {\n        const selectedDate = selectedDates[0];\n        if (!timer.isActive) {\n            timer.userSelectedDate = selectedDate;\n            if (selectedDate < Date.now()) {\n                iziToast.show({\n                    iconUrl: imgIcon,\n                    message: 'Please choose a date in the future',\n                    color: red,\n                    position: \"topRight\",\n                });\n                buttonElem.classList.add('active-button');\n                buttonElem.disabled = true;\n            } else {\n                buttonElem.classList.remove('active-button');\n                buttonElem.classList.add('inactive-button');\n                buttonElem.disabled = false;\n            }\n        } else {\n            timer.reset();\n            timer.userSelectedDate = selectedDate;\n            timer.start;\n        }\n    },\n};\n\nbuttonElem.addEventListener('click', () => {\n    if (!timer.isActive && timer.userSelectedDate >= Date.now()) {\n        timer.start;\n        buttonElem.classList.add('active-button');\n        buttonElem.classList.remove('inactive-button');\n    }\n});\n\ntry {\n    flatpickr(inputElem, options);\n} catch (error) {\n    const errorMessage =\n      'An error occurred while initializing the date picker. Please try again later.';\n    console.error(errorMessage, error);\n    iziToast.error({\n      title: 'Error',\n      message: errorMessage,\n      position: 'topRight',\n    });\n}"],"names":["inputElem","buttonElem","daysElem","hoursElem","minutesElem","secondsElem","timer","ms","days","hours","minutes","seconds","startTime","currentTime","timeInTimer","value","options","selectedDates","selectedDate","iziToast","flatpickr","error","errorMessage"],"mappings":"2GAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAQ,CACR,WAAY,KACZ,SAAU,GACV,iBAAkB,EAClB,iBAAkB,KAElB,UAAUC,EAAI,CAKV,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,EAED,OAAQ,CACJ,GAAI,CAAC,KAAK,kBAAoB,KAAK,SAC/B,OAEJ,MAAMC,EAAY,KAAK,iBACjBC,EAAc,KAAK,MAGzB,GAFA,KAAK,iBAAmBD,EAAYC,EAEhC,KAAK,kBAAoB,EAAG,CAC5B,KAAK,iBAAmB,EACxB,KAAK,KAAI,EACT,MACH,CAED,KAAK,SAAW,GAChB,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMA,EAAc,KAAK,MAEzB,GADA,KAAK,iBAAmBD,EAAYC,EAChC,KAAK,kBAAoB,EACzB,KAAK,KAAI,MACN,CACH,MAAMC,EAAc,KAAK,UAAU,KAAK,gBAAgB,EACxDZ,EAAS,YAAc,KAAK,QAAQY,EAAY,IAAI,EACpDX,EAAU,YAAc,KAAK,QAAQW,EAAY,KAAK,EACtDV,EAAY,YAAc,KAAK,QAAQU,EAAY,OAAO,EAC1DT,EAAY,YAAc,KAAK,QAAQS,EAAY,OAAO,CAC7D,CACJ,EAAE,GAAI,CACV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,EACnB,EAED,OAAQ,CACJ,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,GAChBZ,EAAS,YAAc,KACvBC,EAAU,YAAc,KACxBC,EAAY,YAAc,KAC1BC,EAAY,YAAc,IAC7B,EAED,QAAQU,EAAO,CACX,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,EAEA,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,GAAiB,CACtB,MAAMC,EAAeD,EAAc,GAE/BX,EAAM,iBAAmBY,EACrBA,EAAe,KAAK,OACpBC,EAAS,KAAK,CACV,QAAS,QACT,QAAS,qCACT,MAAO,IACP,SAAU,UAC9B,CAAiB,EACDlB,EAAW,UAAU,IAAI,eAAe,EACxCA,EAAW,SAAW,KAEtBA,EAAW,UAAU,OAAO,eAAe,EAC3CA,EAAW,UAAU,IAAI,iBAAiB,EAC1CA,EAAW,SAAW,GAOjC,CACL,EAEAA,EAAW,iBAAiB,QAAS,IAAM,CAChBK,EAAM,kBAAoB,KAAK,IAAG,IAErDL,EAAW,UAAU,IAAI,eAAe,EACxCA,EAAW,UAAU,OAAO,iBAAiB,EAErD,CAAC,EAED,GAAI,CACAmB,EAAUpB,EAAWgB,CAAO,CAChC,OAASK,EAAP,CACE,MAAMC,EACJ,gFACF,QAAQ,MAAMA,EAAcD,CAAK,EACjCF,EAAS,MAAM,CACb,MAAO,QACP,QAASG,EACT,SAAU,UAChB,CAAK,CACL"}